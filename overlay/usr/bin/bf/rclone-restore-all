#!/command/with-contenv sh

set -euo pipefail
export BF_E=`basename ${0}`


#======================================================================================================================
# Test setup.
#======================================================================================================================

${BF_LIB}/test-setup


#======================================================================================================================
# Restore specified file.
#======================================================================================================================

${BF_LIB}/clear-restore

bf-echo "Restoring entire mirror..."
rclone copy \
    --log-file=${RCLONE_LOG} \              # Log everything to this file
    --progress \                            # Show progress during transfer
    "${BACKUP_RCLONE_STORAGE}:${BACKUP_RCLONE_PATH}" \
    "${BACKUP_RESTORE}"
bf-done
