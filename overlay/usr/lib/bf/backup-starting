#!/bin/sh

set -euo pipefail


#======================================================================================================================
# If running file exists, do not continue.
#======================================================================================================================

if [ -f "${BACKUP_RUNNING}" ] ; then
    bf-error "Unable to start: backup already running." "backup-starting" | tee -a ${BACKUP_OPERATIONS_LOG}
fi


#======================================================================================================================
# Log current operation starting (name contained in BF_E).
#======================================================================================================================

bf-echo "Starting..." "backup-starting" | tee -a ${BACKUP_OPERATIONS_LOG}


#======================================================================================================================
# Create running file using current date.
#======================================================================================================================

bf-echo "Started." "backup-starting" > ${BACKUP_RUNNING}
